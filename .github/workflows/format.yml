name: Format
on:
    push:
        branches: [master]
    pull_request:
        branches: [master]

# Runs `oxfmt` on a pull request so everything is nice and formatted!
# If something's wrong, a new commit fixing the issues will automatically be pushed to the PR branch.

jobs:
    format:
        runs-on: ubuntu-latest

        steps:
            - name: Clone repository
              uses: actions/checkout@v4
              with:
                  ref: ${{ github.head_ref }}

            - uses: ./.github/actions/setup-node-yarn-deps
              with:
                  runPostinstallScripts: false

            - name: Run formatter
              run: yarn fixFormatAll

            - uses: stefanzweifel/git-auto-commit-action@v7
              with:
                  commit_message: "ðŸ¤– style: format code"
